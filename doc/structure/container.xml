<?xml version="1.0"?> 

<!--
	description:
	
		"General Abstractions"

	library:    "Gobo Eiffel Structure Library"
	author:     "Eric Bezault <ericb@gobosoft.com>"
	copyright:  "Copyright (c) 1997-2001, Eric Bezault and others"
	license:    "Eiffel Forum Freeware License v1 (see forum.txt)"
	date:       "$Date$"
	revision:   "$Revision$"
-->

<chapter id="structure.container.top">
<chapterinfo>
	<copyright>
		<year>1999-2001</year>
		<holder>Eric Bezault</holder>
	</copyright>
	<author>
		<firstname>Eric</firstname><surname>Bezault</surname>
	</author>
	<email>ericb@gobosoft.com</email>
	<date>21 August 1999</date>
</chapterinfo>

<title>General Abstractions</title>

<para>
<mediaobjectco>
<imageobjectco>
<areaspec>
	<area coords="133 253 220 286" linkend="structure.flatshort.ds_bilinear.top"/>
	<area coords="138 180 216 208" linkend="structure.flatshort.ds_linear.top"/>
	<area coords="246 102 336 133" linkend="structure.flatshort.ds_sortable.top"/>
	<area coords="197 14 282 44" linkend="structure.flatshort.ds_container.top"/>
	<area coords="15 103 107 134" linkend="structure.flatshort.ds_searchable.top"/>
	<area coords="245 178 336 209" linkend="structure.flatshort.ds_indexable.top"/>
	<area coords="128 103 227 134" linkend="structure.flatshort.ds_traversable.top"/>
	<area coords="352 104 440 134" linkend="structure.flatshort.ds_resizable.top"/>
</areaspec>
<imageobject>
<imagedata align="center" fileref="image/container.gif"></imagedata>
</imageobject>
</imageobjectco>
</mediaobjectco>
</para>

<para>
The <libraryname>Gobo Eiffel Structure Library</libraryname> follows the
classical design pattern whereby deferred classes introduce
abstract properties, which leaves room for expansion by
inheriting from these deferred classes to implement yet
unavailable containers. The <classname>container</classname>
cluster contains classes describing general abstract notions such
as traversable, resizable or sortable properties.
</para>

<sect1 id="structure.container.ds_container"><title>Class <classname>DS_CONTAINER</classname></title>

<para>
All data structures are descendant of class
<link linkend="structure.flatshort.ds_container.top"><classname>DS_CONTAINER</classname></link>.
The classes are generic, the generic parameter representing the
type of the items being held in the containers. <classname>DS_CONTAINER</classname>
provides expected queries such as
<link linkend="structure.flatshort.ds_container.count"><featurename>count</featurename></link>,
the number of items in the container, and
<link linkend="structure.flatshort.ds-container.is_empty"><featurename>is_empty</featurename></link>,
checking whether there is any item held in the container. Also
available is feature
<link linkend="structure.flatshort.ds_container.wipe_out"><featurename>wipe_out</featurename></link>,
which empty the container putting it back to a state similar to
what it was just after its creation.
</para>

<para>
The most direct descendant classes of <classname>DS_CONTAINER</classname>
introduce some abstract properties of containers.
</para>

</sect1>
<sect1 id="structure.container.ds_searchable">
<title>Class <classname>DS_SEARCHABLE</classname></title>

<para>
Some containers can provide facilities to find out whether a
given item is held in this container. The class
<link linkend="structure.flatshort.ds_searchable.top"><classname>DS_SEARCHABLE</classname></link>
introduces two features for this purpose:
<link linkend="structure.flatshort.ds_searchable.has"><featurename>has</featurename></link>
is a boolean query which returns true if the object given as
argument is actually held in the container, and
<link linkend="structure.flatshort.ds_searchable.occurrences"><featurename>occurrences</featurename></link>
is the number of times an object appears in that container.
</para>

<para>
Depending on the context, several different criteria might be
used to search items in a container. For example, one may want to
check whether a given object appears in a list (using Eiffel's
'<featurename>=</featurename>' comparison criterion) or whether a
similar object is included (using the redefinable feature
<featurename>is_equal</featurename> from class
<classname>GENERAL</classname> as equality criterion).
In order to achieve this flexibility, the class
<classname>DS_SEARCHABLE</classname> can
be configured with an instance of class
<link linkend="structure.flatshort.ds_equality_tester.top"><classname>DS_EQUALITY_TESTER</classname></link>
which provides a comparison criterion to the container. This
comparison criterion is held in the attribute
<link linkend="structure.flatshort.ds_searchable.equality_tester"><featurename>equality_tester</featurename></link>
and can be changed with
<link linkend="structure.flatshort.ds_searchable.set_equality_tester"><featurename>set_equality_tester</featurename></link>.
When no <featurename>equality_tester</featurename> has been specified,
the Eiffel's '<featurename>=</featurename>' comparison criterion is used.
By default, <classname>DS_EQUALITY_TESTER</classname> is
implemented using feature <featurename>equal</featurename> from
class <classname>GENERAL</classname>, but descendant
classes can be easily written to provide user-defined comparison
criteria.
</para>

<para>
The comparison criterion of the container is not only taken
into account by the features <featurename>has</featurename> and
<featurename>occurrences</featurename> but also by the features
<link linkend="structure.flatshort.ds_linear_cursor.search_forth"><featurename>search_forth</featurename></link>
and <link linkend="structure.flatshort.ds_bilinear_cursor.search_back"><featurename>search_back</featurename></link>
provided by the cursor classes of the
<link linkend="structure.traversal.top">traversal mechanism</link>.
</para>

</sect1>
<sect1><title>Class <classname>DS_TRAVERSABLE</classname></title>

<para>
Some containers can provide facilities in order to inspect
their items one after another. This traversal mechanism is quite
complex since there is different schools of thought for the
design and implementation of such pattern and hence deserves a
<link linkend="structure.traversal.top">chapter of its own</link> in this
documentation.
</para>

</sect1>
<sect1><title>Class <classname>DS_SORTABLE</classname></title>

<para>
Some containers such as priority queues or binary search trees
keep their items sorted. On the other hand some other containers
do not necessarily keep their items sorted but provide facilities
to sort them on demand according to various comparison criteria
and sorting algorithms. These latter containers inherit from the
class <link linkend="structure.flatshort.ds_sortable.top"><classname>DS_SORTABLE</classname></link>.
As just said, this facility depends on various criteria such as
sorting algorithms and here again deserves a
<link linkend="structure.sort.top">chapter of its own</link>
in this documentation.
</para>

</sect1>
<sect1 id="structure.container.ds_indexable"><title>Class <classname>DS_INDEXABLE</classname></title>

<para>
Some containers provide an index-based access to their items,
like access to the characters of a <classname>STRING</classname>
or to the elements of an <classname>ARRAY</classname>.
Such containers inherit from the class
<link linkend="structure.flatshort.ds_indexable.top"><classname>DS_INDEXABLE</classname></link>
whose items are indexed from 1 to
<link linkend="structure.flatshort.ds_indexable.count"><featurename>count</featurename></link>.
The basic feature of this class is of course the access routine
<link linkend="structure.flatshort.ds_indexable.item"><featurename>item</featurename></link>
(for analogy to class <classname>ARRAY</classname> and other classes
from <libraryname>EiffelBase</libraryname>, feature
<infixname>@</infixname> has been added as a synomym of
<featurename>item</featurename>), but it is also equipped with commands to
add and remove items at given index positions, such as
<link linkend="structure.flatshort.ds_indexable.put"><featurename>put</featurename></link>
or <link linkend="structure.flatshort.ds_indexable.remove"><featurename>remove</featurename></link>.
There is also convenience features to access the first (at index
1) and last (at index <featurename>count</featurename>)
items of the container, such as
<link linkend="structure.flatshort.ds_indexable.first"><featurename>first</featurename></link>,
<link linkend="structure.flatshort.ds_indexable.put_last"><featurename>put_last</featurename></link> or
<link linkend="structure.flatshort.ds_indexable.remove_first"><featurename>remove_first</featurename></link>.
Have a look at the <link linkend="structure.flatshort.ds_indexable.top">flat-short form</link>
for a complete list of these features.
</para>

</sect1>
<sect1 id="structure.container.ds_resizable"><title>Class <classname>DS_RESIZABLE</classname></title>

<para>
Some containers allocate chunks of memory to hold their items.
This is for example the case for containers internally
implemented with arrays (typically named
<classname>DS_ARRAYED_*</classname>).
Such data structures cannot contain more items than initially
planned when allocating the chunk of memory unless they are
resized from time to time. The class
<link linkend="structure.flatshort.ds_resizable.top"><classname>DS_RESIZABLE</classname></link>
provides such facility. Apart from the expected feature
<link linkend="structure.flatshort.ds_resizable.resize"><featurename>resize</featurename></link>,
there are also two queries which are the counterpart of
<featurename>count</featurename> and <featurename>is_empty</featurename>
from <classname>DS_CONTAINER</classname>:
<link linkend="structure.flatshort.ds_resizable.capacity"><featurename>capacity</featurename></link>
is the maximum number of items that the container can currently hold, and
<link linkend="structure.flatshort.ds_resizable.is_full"><featurename>is_full</featurename></link>
checks whether the number of items in the container has reached this
limit.
</para>

</sect1>

</chapter>
