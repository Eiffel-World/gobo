
<chapter id="fileset_element">
<title>Fileset</title>

<sect1 id="fileset_description">
<title>Description</title>
<para>
(NOT FINISHED)
A fileset is a group of files. The files included in the fileset are
defined through a directory representing the start point in a filesystem
and patterns describing which files in or underneath that directory should
be included in the fileset respectively excluded from the fileset.
As a fileset is not a task but a general element it cannot be used
on its own. It can only be used by tasks supporting filesets as
nested elements.
</para>
</sect1>

	<sect1 id="fileset_parameters">
		<title>Parameters</title>
	
		<variablelist>
			<varlistentry>
				<term>directory</term>
				<listitem>
					<para><emphasis>Description: </emphasis>File to be copied</para>
				</listitem>
				<listitem>
					<para><emphasis>Domain: </emphasis>Valid filename pointing to existing file</para>
				</listitem>
				<listitem>
					<para><emphasis>Default: </emphasis>-</para>
				</listitem>
			</varlistentry>
		
			<varlistentry>
				<term>include</term>
				<listitem>
					<para><emphasis>Description: </emphasis>File to copy to</para>
				</listitem>
				<listitem>
					<para><emphasis>Domain: </emphasis>Valid filename</para>
				</listitem>
				<listitem>
					<para><emphasis>Default: </emphasis>-</para>
				</listitem>
			</varlistentry>
		
			<varlistentry>
				<term>exclude</term>
				<listitem>
					<para><emphasis>Description: </emphasis>Directory to which file(s) should be copied to</para>
				</listitem>
				<listitem>
					<para><emphasis>Domain: </emphasis>Valid directoryname pointing to existing directory</para>
				</listitem>
				<listitem>
					<para><emphasis>Default: </emphasis>-</para>
				</listitem>
			</varlistentry>
		
			<varlistentry>
				<term>concat</term>
				<listitem>
					<para><emphasis>Description: </emphasis>Directory to which file(s) should be copied to</para>
				</listitem>
				<listitem>
					<para><emphasis>Domain: </emphasis>Valid directoryname pointing to existing directory</para>
				</listitem>
				<listitem>
					<para><emphasis>Default: </emphasis>-</para>
				</listitem>
		
			<varlistentry>
				<term>force</term>
				<listitem>
					<para><emphasis>Description: </emphasis>Directory to which file(s) should be copied to</para>
				</listitem>
				<listitem>
					<para><emphasis>Domain: </emphasis>Valid directoryname pointing to existing directory</para>
				</listitem>
				<listitem>
					<para><emphasis>Default: </emphasis>-</para>
				</listitem>
			</varlistentry>
			</varlistentry>
		</variablelist>
	</sect1>
	
	<sect1 id="fileset_nested_parameters">
		<title>Parameters specified as nested elements</title>
	
		<variablelist>
			<varlistentry>
				<term>include</term>
				<listitem>
					<para><emphasis>Description: </emphasis>File to be copied</para>
				</listitem>
				<listitem>
					<para><emphasis>Domain: </emphasis>Valid filename pointing to existing file</para>
				</listitem>
				<listitem>
					<para><emphasis>Default: </emphasis>-</para>
				</listitem>
			</varlistentry>
		
			<varlistentry>
				<term>exclude</term>
				<listitem>
					<para><emphasis>Description: </emphasis>File to be copied</para>
				</listitem>
				<listitem>
					<para><emphasis>Domain: </emphasis>Valid filename pointing to existing file</para>
				</listitem>
				<listitem>
					<para><emphasis>Default: </emphasis>-</para>
				</listitem>
			</varlistentry>
		
			<varlistentry>
				<term>map</term>
				<listitem>
					<para><emphasis>Description: </emphasis>File to be copied</para>
				</listitem>
				<listitem>
					<para><emphasis>Domain: </emphasis>Valid filename pointing to existing file</para>
				</listitem>
				<listitem>
					<para><emphasis>Default: </emphasis>-</para>
				</listitem>
			</varlistentry>
		</variablelist>
	</sect1>
		
	<sect1 id="fileset_specification">
		<title>RNG Specification</title>
		
		<programlisting><![CDATA[
  <define name="fileset">
    <element name="fileset">
      <attribute name="directory"/>
      <attribute name="include"/>
      <optional>
        <attribute name="exclude"/>
      </optional>
      <optional>
        <attribute name="concat"/>
      </optional>
      <optional>
        <attribute name="force">
          <!-- runtime evaluation
          <choice>
            <value>true</value>
            <value>false</value>
          </choice>
          -->
        </attribute>
      </optional>
      <zeroOrMore>
        <element name="include">
          <attribute name="name"/>
        </element>
      </zeroOrMore>
      <zeroOrMore>
        <element name="exclude">
          <attribute name="name"/>
        </element>
      </zeroOrMore>
      <optional>
        <ref name="map"/>
      </optional>
    </element>
  </define>
		        ]]>
		
	</programlisting>
	</sect1>
	
	<sect1 id="fileset_examples">
		<title>Examples</title>
	<programlisting><![CDATA[
  <fileset directory="kernel" include="@(**/*.ge|**/*.?ace)"/>
  
  <fileset directory="kernel" include="@(**/*.ge|**/*.?ace)" concat="true"/>

  <fileset directory="kernel" include="@(**/*.ge)">
    <map type="glob" from="*.ge" to="*.e"/>
  </fileset>

  <fileset directory="." include="@(**/*.ge)" force="false">
    <map type="glob" from="*.ge" to="${GOBO}/example/geant/tmp/*.e">
      <map type="flat"/>
    </map>
  </fileset>
]]>
	</programlisting>
	</sect1>

</chapter>
